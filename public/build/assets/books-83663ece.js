import{q as r,K as v,L as b}from"./app-1754e601.js";function _(){const u=r({}),l=r([]),d=r({name:""}),c=v(),a=r({}),s=r(!1),n=b("$swal"),p=async()=>{axios.get("/api/books").then(o=>{u.value=o.data.data})},k=async(o=1,t="",e="",i="",f="created_at",h="desc")=>{axios.get("/api/books?page="+o+"&search_id="+t+"&search_title="+e+"&search_global="+i+"&order_column="+f+"&order_direction="+h).then(B=>{l.value=B.data})};return{books:l,book:d,getBookList:p,BookList:u,getBooks:k,getBook:async o=>{axios.get("/api/books/"+o).then(t=>{d.value=t.data.data})},storeBook:async o=>{if(s.value)return;s.value=!0,a.value={};let t=new FormData;for(let e in o)o.hasOwnProperty(e)&&t.append(e,o[e]);axios.post("/api/books",t).then(e=>{c.push({name:"books.index"}),n({icon:"success",title:"Book saved successfully"})}).catch(e=>{var i;(i=e.response)!=null&&i.data&&(a.value=e.response.data.errors)}).finally(()=>s.value=!1)},updateBook:async o=>{s.value||(s.value=!0,a.value={},axios.put("/api/books/"+user.id,user).then(t=>{c.push({name:"books.index"}),n({icon:"success",title:"Book updated successfully"})}).catch(t=>{var e;(e=t.response)!=null&&e.data&&(a.value=t.response.data.errors)}).finally(()=>s.value=!1))},deleteBook:async o=>{n({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(t=>{t.isConfirmed&&axios.delete("/api/books/"+o).then(e=>{k(),c.push({name:"books.index"}),n({icon:"success",title:"Book deleted successfully"})}).catch(e=>{n({icon:"error",title:"Something went wrong"})})})},validationErrors:a,isLoading:s}}export{_ as u};
