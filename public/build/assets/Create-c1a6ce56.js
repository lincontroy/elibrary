import{A as E,v as j,r as z,o,b as t,d as e,k as A,e as P,p as a,t as l,F as r,f as i,y as c,Q,z as y,B as T}from"./app-1754e601.js";import{u as G}from"./roles-2a379bb6.js";import{u as H}from"./books-83663ece.js";import{u as I}from"./users-34a1e8a0.js";import{u as J}from"./bookloans-85d97182.js";import{d as g,u as K,a as _,r as O,m as W}from"./rules-2971686f.js";const X={class:"row justify-content-center my-5"},Y={class:"col-md-10"},Z={class:"card border-0 shadow-sm"},$={class:"card-body"},ee={class:"mb-3"},se=e("label",{for:"username",class:"form-label"},"UserName",-1),oe={class:"text-danger mt-1"},te={class:"text-danger mt-1"},ae={class:"mb-3"},ne=e("label",{for:"bookname",class:"form-label"},"Bookname",-1),le=["value"],de={class:"text-danger mt-1"},re={class:"text-danger mt-1"},ie={class:"mb-3"},ue=e("label",{for:"loandate",class:"form-label"},"Loan date",-1),me={class:"text-danger mt-1"},ce={class:"text-danger mt-1"},_e={class:"mb-3"},ve=e("label",{for:"days",class:"form-label"},"Number of days",-1),be={class:"text-danger mt-1"},pe={class:"text-danger mt-1"},fe={class:"mt-4"},he=["disabled"],ke={class:""},ye={key:0},ge={key:1},Re={__name:"Create",setup(Be){const{roleList:Ve,getRoleList:B}=G(),{userList:V,getUserList:x}=I(),{storeBookLoan:L,isLoading:v}=J(),{storeBook:xe,validationErrors:u,BookList:U,getBookList:q,getBooks:Le,books:Ue}=H();g("required",O),g("min",W);const S={username:"required",bookname:"required",loandate:"required",days:"required"},{validate:w,errors:m}=K({validationSchema:S}),{value:F}=_("username",null,{initialValue:"",label:"name"}),{value:M}=_("bookname",null,{initialValue:"",label:"name"}),{value:N}=_("loandate",null,{initialValue:""}),{value:R}=_("days",null,{initialValue:""}),n=E({username:F,bookname:M,loandate:N,days:R});function C(){w().then(b=>{b.valid&&L(n)})}return j(()=>{B(),x(),q()}),(b,d)=>{var p,f,h,k;const D=z("v-select");return o(),t("div",X,[e("div",Y,[e("div",Z,[e("div",$,[e("form",{onSubmit:A(C,["prevent"])},[e("div",ee,[se,P(D,{modelValue:n.username,"onUpdate:modelValue":d[0]||(d[0]=s=>n.username=s),options:a(V),reduce:s=>s.id,label:"name",class:"form-control"},null,8,["modelValue","options","reduce"]),e("div",oe,l(a(m).username),1),e("div",te,[(o(!0),t(r,null,i((p=a(u))==null?void 0:p.username,s=>(o(),t("div",null,l(s),1))),256))])]),e("div",ae,[ne,c(e("select",{class:"form-control","onUpdate:modelValue":d[1]||(d[1]=s=>n.bookname=s)},[(o(!0),t(r,null,i(a(U),s=>(o(),t("option",{value:s.id},l(s.name),9,le))),256))],512),[[Q,n.bookname]]),e("div",de,l(a(m).bookname),1),e("div",re,[(o(!0),t(r,null,i((f=a(u))==null?void 0:f.bookname,s=>(o(),t("div",null,l(s),1))),256))])]),e("div",ie,[ue,c(e("input",{"onUpdate:modelValue":d[2]||(d[2]=s=>n.loandate=s),type:"date",class:"form-control"},null,512),[[y,n.loandate]]),e("div",me,l(a(m).loandate),1),e("div",ce,[(o(!0),t(r,null,i((h=a(u))==null?void 0:h.loandate,s=>(o(),t("div",null,l(s),1))),256))])]),e("div",_e,[ve,c(e("input",{"onUpdate:modelValue":d[3]||(d[3]=s=>n.days=s),min:"1",type:"number",class:"form-control"},null,512),[[y,n.days]]),e("div",be,l(a(m).days),1),e("div",pe,[(o(!0),t(r,null,i((k=a(u))==null?void 0:k.days,s=>(o(),t("div",null,l(s),1))),256))])]),e("div",fe,[e("button",{disabled:a(v),class:"btn btn-primary"},[c(e("div",ke,null,512),[[T,a(v)]]),a(v)?(o(),t("span",ye,"Processing...")):(o(),t("span",ge,"Save"))],8,he)])],32)])])])])}}};export{Re as default};
