import{q as i,K as h,L as B}from"./app-1754e601.js";function y(){const c=i([]),l=i({name:""}),u=h(),t=i({}),s=i(!1),n=B("$swal"),d=async(a=1,e="",o="",r="",p="created_at",k="desc")=>{axios.get("/api/bookloans?page="+a+"&search_id="+e+"&search_title="+o+"&search_global="+r+"&order_column="+p+"&order_direction="+k).then(f=>{c.value=f.data})};return{bookLoans:c,bookLoan:l,getBookLoans:d,getBookLoan:async a=>{axios.get("/api/books/"+a).then(e=>{l.value=e.data.data})},storeBookLoan:async a=>{if(s.value)return;s.value=!0,t.value={};let e=new FormData;for(let o in a)a.hasOwnProperty(o)&&e.append(o,a[o]);axios.post("/api/bookloans",e).then(o=>{u.push({name:"bookloans.index"}),n({icon:"success",title:"Book Loan saved successfully"})}).catch(o=>{var r;(r=o.response)!=null&&r.data&&(t.value=o.response.data.errors)}).finally(()=>s.value=!1)},updateBookLoan:async a=>{s.value||(s.value=!0,t.value={},axios.put("/api/bookloans/"+user.id,user).then(e=>{u.push({name:"books.index"}),n({icon:"success",title:"Book Loan updated successfully"})}).catch(e=>{var o;(o=e.response)!=null&&o.data&&(t.value=e.response.data.errors)}).finally(()=>s.value=!1))},returnBook:async a=>{n({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, return it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(e=>{e.isConfirmed&&axios.put("/api/bookloans/"+a.id,a).then(o=>{d(),u.push({name:"bookloans.index"}),n({icon:"success",title:"Book Loan returned successfully"})}).catch(o=>{n({icon:"error",title:"Something went wrong"})})})},validationErrors:t,isLoading:s}}export{y as u};
