import{q as p,K as L,L as U,P as w,A as D,v as M,C as R,o as i,b as l,d as e,k as N,y as h,z as S,t as f,p as o,F as k,f as q,B as T}from"./app-1754e601.js";import{d as F,u as j,a as V,r as z,m as A}from"./rules-2971686f.js";function C(){const _=p({name:"",email:""});L();const r=p({}),n=p(!1),d=U("$swal");return{profile:_,getProfile:async()=>{_.value=w.getters["auth/user"]},updateProfile:async c=>{n.value||(n.value=!0,r.value={},axios.put("/api/user",c).then(({data:s})=>{s.success&&(w.commit("auth/SET_USER",s.data),d({icon:"success",title:"Profile updated successfully"}))}).catch(s=>{var u;(u=s.response)!=null&&u.data&&(r.value=s.response.data.errors)}).finally(()=>n.value=!1))},validationErrors:r,isLoading:n}}const K={class:"card border-0"},$=e("div",{class:"card-header bg-transparent"},[e("h5",{class:"float-start"},"Profile")],-1),G={class:"card-body"},H={class:"mb-3"},I=e("label",{for:"name",class:"form-label"},"Name",-1),J={class:"text-danger mt-1"},O={class:"text-danger mt-1"},Q={class:"mb-3"},W=e("label",{for:"email",class:"form-label"},"Email",-1),X={class:"text-danger mt-1"},Y={class:"text-danger mt-1"},Z={class:"mb-3"},ee=["disabled"],se={class:""},ae={key:0},te={key:1},oe={__name:"index",setup(_){F("required",z),F("min",A);const r={name:"required|min:3",email:"required"},{validate:n,errors:d}=j({validationSchema:r}),{value:b}=V("name",null,{initialValue:""}),{value:g}=V("email",null,{initialValue:""}),{profile:c,getProfile:s,updateProfile:u,validationErrors:y,isLoading:v}=C(),a=D({name:b,email:g});function B(){n().then(P=>{P.valid&&u(a)})}return M(()=>{s()}),R(()=>{a.name=c.value.name,a.email=c.value.email}),(P,m)=>{var x,E;return i(),l("div",K,[$,e("div",G,[e("form",{onSubmit:N(B,["prevent"])},[e("div",H,[I,h(e("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=t=>a.name=t),class:"form-control",id:"name"},null,512),[[S,a.name]]),e("div",J,f(o(d).name),1),e("div",O,[(i(!0),l(k,null,q((x=o(y))==null?void 0:x.name,t=>(i(),l("div",null,f(t),1))),256))])]),e("div",Q,[W,h(e("input",{type:"email","onUpdate:modelValue":m[1]||(m[1]=t=>a.email=t),class:"form-control",id:"email"},null,512),[[S,a.email]]),e("div",X,f(o(d).email),1),e("div",Y,[(i(!0),l(k,null,q((E=o(y))==null?void 0:E.email,t=>(i(),l("div",null,f(t),1))),256))])]),e("div",Z,[e("button",{disabled:o(v),class:"btn btn-primary"},[h(e("div",se,null,512),[[T,o(v)]]),o(v)?(i(),l("span",ae,"Processing...")):(i(),l("span",te,"Update"))],8,ee)])],32)])])}}};export{oe as default};
